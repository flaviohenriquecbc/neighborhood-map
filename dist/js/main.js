"use strict";function initialSetUp(){var e=new google.maps.LatLng(45.5015217,(-73.5732091)),n={zoom:11,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(document.getElementById("map-canvas"),n),o=new google.maps.Marker({position:e,title:"Montréal, QC",map:t}),a=new google.maps.InfoWindow({content:"Montréal, QC"});google.maps.event.addListener(o,"click",function(){a.open(t,o)})}function initialize(){initialSetUp();var e=new google.maps.places.SearchBox(document.getElementById("pac-input"));google.maps.event.addListener(e,"places_changed",function(){for(var n=e.getPlaces(),t=document.getElementById("instagram");t.firstChild;)t.removeChild(t.firstChild);var o,a=new XMLHttpRequest,i=n[0].geometry.location.A,l=n[0].geometry.location.F,c="https://api.instagram.com/v1/media/search?lat="+i+"&lng="+l+"&access_token=322608956.c39a870.654d8fb14b8d48838cc430bebcb0dede",g=new google.maps.Map(document.getElementById("map-canvas"),{zoom:15,center:new google.maps.LatLng(i,l),mapTypeId:google.maps.MapTypeId.ROADMAP}),s=new google.maps.InfoWindow;a.open("GET",c,!0),a.onload=function(){function e(e){return e.caption&&e.caption.text?e.caption.text:"No Title"}if(a.status>=200&&a.status<400){for(var n=JSON.parse(a.responseText),i=document.createElement("ul"),l=0;l<n.data.length;l++){var c=document.createElement("li"),r=document.createElement("img");r.src=n.data[l].images.thumbnail.url,c.appendChild(r),i.appendChild(c),o=new google.maps.Marker({position:new google.maps.LatLng(n.data[l].location.latitude,n.data[l].location.longitude),map:g}),google.maps.event.addListener(o,"click",function(t,o){return function(){s.setContent('<div class="infoWindow"><img src="'+n.data[o].images.thumbnail.url+'"><p>'+e(n.data[o])+"</p></div>"),s.open(g,t)}}(o,l)),c.addEventListener("click",function(e){return function(){google.maps.event.trigger(e,"click")}}(o))}t.insertBefore(i,t.firstChild)}else console.log("Something went wrong ... ")},a.onerror=function(){console.log("Connection Error")},a.send()})}google.maps.event.addDomListener(window,"load",initialize);